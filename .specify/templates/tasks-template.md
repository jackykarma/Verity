---

description: "功能落地任务清单模板"
---

# 任务：[功能名称]

**输入**：来自 `/specs/[###-feature-name]/` 的设计文档
**前置条件**：plan.md（必填）、spec.md（用户故事必填）、research.md、data-model.md、contracts/

**测试**：以下示例包含测试任务。测试为可选项——仅在功能规格中明确要求时才纳入。

**组织方式**：任务按用户故事分组，以便每个故事都能独立实现和测试。

## 格式：`[ID] [P?] [Story] 描述`

- **[P]**：可并行执行（涉及不同文件，无依赖关系）
- **[Story]**：该任务所属的用户故事（例如 US1、US2、US3）
- 描述中需包含准确的文件路径

## 路径约定

- **单一项目**：仓库根目录下的 `src/`、`tests/`
- **Web 应用**：`backend/src/`、`frontend/src/`
- **移动端**：`api/src/`、`ios/src/` 或 `android/src/`
- 以下展示的路径默认基于单一项目结构——可根据 plan.md 的结构调整

<!--
============================================================================
重要提示：以下任务仅为示例，用于说明格式和逻辑。

/speckit.tasks 命令必须基于以下内容替换为实际任务：
- spec.md 中的用户故事（含优先级 P1、P2、P3...）
- plan.md 中的功能需求
- data-model.md 中的实体定义
- contracts/ 中的接口端点定义

任务必须按用户故事组织，确保每个故事能够：
- 独立实现
- 独立测试
- 作为最小可行产品（MVP）增量交付

生成的 tasks.md 文件中请勿保留这些示例任务。
============================================================================
-->

## 阶段 1：环境搭建（共享基础设施）

**目标**：项目初始化与基础结构搭建

- [ ] T001 按照落地方案创建项目目录结构
- [ ] T002 基于 [框架] 依赖初始化 [开发语言] 项目
- [ ] T003 [P] 配置代码检查与格式化工具

---

## 阶段 2：核心基础（阻塞性前置条件）

**目标**：所有用户故事实现前必须完成的核心基础设施搭建

**⚠️ 关键**：此阶段完成前，任何用户故事相关工作均不可启动

核心基础任务示例（可根据项目调整）：

- [ ] T004 搭建数据库表结构与迁移框架
- [ ] T005 [P] 实现认证/授权框架
- [ ] T006 [P] 搭建 API 路由与中间件结构
- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 配置异常处理与日志记录基础设施
- [ ] T009 搭建环境配置管理体系

**检查点**：基础层就绪——用户故事实现可并行启动

---

## 阶段 3：用户故事 1 - [标题]（优先级：P1）🎯 最小可行产品（MVP）

**目标**：[该故事交付能力的简要描述]

**独立测试方式**：[验证该故事独立可用的方法]

### 用户故事 1 测试（可选——仅在要求测试时添加）⚠️

> **注意：需先编写这些测试用例，并确保实现前测试执行失败**

- [ ] T010 [P] [US1] 端点契约测试，路径：tests/contract/test_[名称].py
- [ ] T011 [P] [US1] 用户流程集成测试，路径：tests/integration/test_[名称].py

### 用户故事 1 实现

- [ ] T012 [P] [US1] 创建 [Entity1] 模型，路径：src/models/[entity1].py
- [ ] T013 [P] [US1] 创建 [Entity2] 模型，路径：src/models/[entity2].py
- [ ] T014 [US1] 实现 [服务]，路径：src/services/[service].py（依赖 T012、T013）
- [ ] T015 [US1] 实现 [端点/功能]，路径：src/[目录]/[文件].py
- [ ] T016 [US1] 添加参数校验与异常处理逻辑
- [ ] T017 [US1] 为用户故事 1 的操作添加日志记录

**检查点**：至此，用户故事 1 应具备完整功能且可独立测试

---

## 阶段 4：用户故事 2 - [标题]（优先级：P2）

**目标**：[该故事交付能力的简要描述]

**独立测试方式**：[验证该故事独立可用的方法]

### 用户故事 2 测试（可选——仅在要求测试时添加）⚠️

- [ ] T018 [P] [US2] 端点契约测试，路径：tests/contract/test_[名称].py
- [ ] T019 [P] [US2] 用户流程集成测试，路径：tests/integration/test_[名称].py

### 用户故事 2 实现

- [ ] T020 [P] [US2] 创建 [实体] 模型，路径：src/models/[entity].py
- [ ] T021 [US2] 实现 [服务]，路径：src/services/[service].py
- [ ] T022 [US2] 实现 [端点/功能]，路径：src/[目录]/[文件].py
- [ ] T023 [US2] 与用户故事 1 的组件集成（如有需要）

**检查点**：至此，用户故事 1 和 2 均应能独立运行

---

## 阶段 5：用户故事 3 - [标题]（优先级：P3）

**目标**：[该故事交付能力的简要描述]

**独立测试方式**：[验证该故事独立可用的方法]

### 用户故事 3 测试（可选——仅在要求测试时添加）⚠️

- [ ] T024 [P] [US3] 端点契约测试，路径：tests/contract/test_[名称].py
- [ ] T025 [P] [US3] 用户流程集成测试，路径：tests/integration/test_[名称].py

### 用户故事 3 实现

- [ ] T026 [P] [US3] 创建 [实体] 模型，路径：src/models/[entity].py
- [ ] T027 [US3] 实现 [服务]，路径：src/services/[service].py
- [ ] T028 [US3] 实现 [端点/功能]，路径：src/[目录]/[文件].py

**检查点**：所有用户故事至此应均可独立运行

---

[按需添加更多用户故事阶段，遵循相同格式]

---

## 依赖关系与执行顺序

### 阶段依赖

- **环境搭建（阶段 1）**：无依赖——可立即启动
- **核心基础（阶段 2）**：依赖环境搭建完成——阻塞所有用户故事
- **用户故事（阶段 3+）**：均依赖核心基础阶段完成
    - 完成后，用户故事可并行推进（如有资源）
    - 或按优先级顺序串行推进（P1 → P2 → P3）
- **优化完善（最终阶段）**：依赖所有目标用户故事完成

### 用户故事依赖

- **用户故事 1（P1）**：核心基础（阶段 2）完成后可启动——无其他故事依赖
- **用户故事 2（P2）**：核心基础（阶段 2）完成后可启动——可与 US1 集成，但需保证独立可测
- **用户故事 3（P3）**：核心基础（阶段 2）完成后可启动——可与 US1/US2 集成，但需保证独立可测

### 单用户故事内部顺序

- 测试用例（如有）必须先编写并确保执行失败后，再开展实现工作
- 模型层开发先于服务层
- 服务层开发先于端点层
- 核心功能实现先于集成工作
- 本故事完成后，再推进下一优先级故事

### 并行执行场景

- 所有标记 [P] 的环境搭建任务可并行
- 所有标记 [P] 的核心基础任务可并行（阶段 2 内）
- 核心基础阶段完成后，所有用户故事可并行启动（如团队容量允许）
- 单用户故事下所有标记 [P] 的测试任务可并行
- 单故事内标记 [P] 的模型开发任务可并行
- 不同团队成员可并行开发不同用户故事

---

## 并行示例：用户故事 1

```bash
# 批量启动用户故事 1 的所有测试（如要求测试）：
任务："端点契约测试，路径：tests/contract/test_[名称].py"
任务："用户流程集成测试，路径：tests/integration/test_[名称].py"

# 批量启动用户故事 1 的所有模型开发：
任务："创建 [Entity1] 模型，路径：src/models/[entity1].py"
任务："创建 [Entity2] 模型，路径：src/models/[entity2].py"
```

---

## 落地策略

### 先完成 MVP（仅用户故事 1）

1. 完成阶段 1：环境搭建
2. 完成阶段 2：核心基础（关键——阻塞所有故事）
3. 完成阶段 3：用户故事 1
4. **暂停并验证**：独立测试用户故事 1
5. 如就绪，进行部署/演示

### 增量交付

1. 完成环境搭建 + 核心基础 → 基础层就绪
2. 新增用户故事 1 → 独立测试 → 部署/演示（MVP！）
3. 新增用户故事 2 → 独立测试 → 部署/演示
4. 新增用户故事 3 → 独立测试 → 部署/演示
5. 每个故事均需在不破坏已有故事的前提下新增价值

### 团队并行策略

多开发者协作场景：

1. 团队共同完成环境搭建 + 核心基础
2. 核心基础完成后：
    - 开发者 A：负责用户故事 1
    - 开发者 B：负责用户故事 2
    - 开发者 C：负责用户故事 3
3. 各故事独立完成并集成

---

## 备注

- [P] 标记的任务 = 涉及不同文件，无依赖关系
- [Story] 标签将任务关联至特定用户故事，便于追溯
- 每个用户故事需可独立完成、独立测试
- 实现前验证测试用例执行失败
- 完成单个任务或逻辑分组后提交代码
- 可在任意检查点暂停，独立验证对应故事
- 避免：模糊的任务描述、同一文件冲突、破坏独立性的跨故事依赖